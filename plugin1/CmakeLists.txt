cmake_minimum_required(VERSION 3.10.0)
project(plugin1 VERSION 0.1.0 LANGUAGES C CXX)

file(GLOB SOURCES "src/*.cpp")

add_library(plugin1 SHARED ${SOURCES})
include_directories("../child_src/include")

# copy dll to plugins folder after build in the child_src directory
add_custom_command(TARGET plugin1 POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy $<TARGET_FILE:plugin1> ../child_src/plugins/$<TARGET_FILE_BASE_NAME:plugin1>.plug
)