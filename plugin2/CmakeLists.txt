cmake_minimum_required(VERSION 3.10.0)
project(plugin2 VERSION 0.1.0 LANGUAGES C CXX)

file(GLOB SOURCES "src/*.cpp")

add_library(plugin2 SHARED ${SOURCES})
include_directories("../child_src/include")

# copy dll to plugins folder after build in the child_src directory
add_custom_command(TARGET plugin2 POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy $<TARGET_FILE:plugin2> ../child_src/plugins/$<TARGET_FILE_BASE_NAME:plugin2>.plug
)